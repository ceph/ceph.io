---
title: "v11.1.1 Kraken rc released"
date: "2016-12-27"
author: "TheAnalyst"
tags:
  - "release"
  - "kraken"
---

This is a release candidate for kraken, the next stable release series.

### Major Changes from Jewel

- _RADOS_:
    - The new _BlueStore_ backend now has a change in the on-disk format, from the previous release candidate 11.1.0 and there might possibly be a change before the final release is cut

### Notable Changes

- bluestore: ceph-disk: adjust bluestore default device sizes ([pr#12530](http://github.com/ceph/ceph/pull/12530), Sage Weil)
- bluestore: os/bluestore: avoid resharding if the last shard size fall below shar… ([pr#12447](http://github.com/ceph/ceph/pull/12447), Igor Fedotov)
- bluestore: os/bluestore: clear omap flag if parent has none ([pr#12351](http://github.com/ceph/ceph/pull/12351), xie xingguo)
- bluestore: os/bluestore: don’t implicitly create the source object for clone ([pr#12353](http://github.com/ceph/ceph/pull/12353), xie xingguo)
- bluestore: os/bluestore: fix ondisk encoding for blobs ([pr#12488](http://github.com/ceph/ceph/pull/12488), Varada Kari, Sage Weil)
- bluestore: os/bluestore: fix potential csum\_order overflow ([pr#12333](http://github.com/ceph/ceph/pull/12333), xie xingguo)
- bluestore: os/bluestore: fix target\_buffer value overflow in Cache::trim() ([pr#12507](http://github.com/ceph/ceph/pull/12507), Igor Fedotov)
- bluestore: os/bluestore: include modified objects in flush list even if onode unchanged ([pr#12541](http://github.com/ceph/ceph/pull/12541), Sage Weil)
- bluestore: os/bluestore: preserve source collection cache during split ([pr#12574](http://github.com/ceph/ceph/pull/12574), Sage Weil)
- bluestore: os/bluestore: remove ‘extents’ from shard\_info ([pr#12629](http://github.com/ceph/ceph/pull/12629), Sage Weil)
- bluestore: os/bluestore: simplified allocator interfaces to single apis ([pr#12355](http://github.com/ceph/ceph/pull/12355), Ramesh Chander)
- bluestore: os/bluestore: simplify allocator release flow ([pr#12343](http://github.com/ceph/ceph/pull/12343), Sage Weil)
- build/ops,common: common/str\_list.h: fix clang warning about std::move ([pr#12570](http://github.com/ceph/ceph/pull/12570), Willem Jan Withagen)
- build/ops: CMakeLists: add vstart-base target ([pr#12476](http://github.com/ceph/ceph/pull/12476), Sage Weil)
- build/ops: systemd: Fix startup of ceph-mgr on Debian 8 ([pr#12555](http://github.com/ceph/ceph/pull/12555), Mark Korenberg)
- build/ops: upstart: fix ceph-crush-location default ([issue#6698](http://tracker.ceph.com/issues/6698), [pr#803](http://github.com/ceph/ceph/pull/803), Jason Dillaman)
- cephfs,cleanup: ceph-fuse: start up log on parent process before shutdown ([issue#18157](http://tracker.ceph.com/issues/18157), [pr#12358](http://github.com/ceph/ceph/pull/12358), Kefu Chai)
- cephfs: client/mds: Clear setuid bits when writing or truncating ([issue#18131](http://tracker.ceph.com/issues/18131), [pr#12412](http://github.com/ceph/ceph/pull/12412), Jeff Layton)
- cephfs: client: fix mutex name typos ([pr#12401](http://github.com/ceph/ceph/pull/12401), Yunchuan Wen)
- cephfs: client: set metadata\[“root”\] from mount method when it’s called with … ([pr#12505](http://github.com/ceph/ceph/pull/12505), Jeff Layton)
- cephfs: get new fsmap after marking clusters down ([issue#7271](http://tracker.ceph.com/issues/7271), [issue#17894](http://tracker.ceph.com/issues/17894), [pr#1262](http://github.com/ceph/ceph/pull/1262), Patrick Donnelly)
- cephfs: libcephfs: add readlink function in cephfs.pyx ([pr#12384](http://github.com/ceph/ceph/pull/12384), huanwen ren)
- cephfs: mon/MDSMonitor: fix iterating over mutated map ([issue#18166](http://tracker.ceph.com/issues/18166), [pr#12395](http://github.com/ceph/ceph/pull/12395), John Spray)
- cephfs: systemd: add ceph-fuse service file ([pr#11542](http://github.com/ceph/ceph/pull/11542), Patrick Donnelly)
- cephfs: test fragment size limit ([issue#16164](http://tracker.ceph.com/issues/16164), [pr#1069](http://github.com/ceph/ceph/pull/1069), Patrick Donnelly)
- cephfs: test readahead is working ([issue#16024](http://tracker.ceph.com/issues/16024), [pr#1046](http://github.com/ceph/ceph/pull/1046), Patrick Donnelly)
- cephfs: update tests to enable multimds when needed ([pr#933](http://github.com/ceph/ceph/pull/933), Greg Farnum)
- cephfs: Port/bootstrap ([pr#827](http://github.com/ceph/ceph/pull/827), Yan, Zheng)
- cleanup,common: common/blkdev: use realpath instead of readlink to resolve the recurs… ([pr#12462](http://github.com/ceph/ceph/pull/12462), Xinze Chi)
- cleanup,rbd: journal: avoid logging an error when a watch is blacklisted ([issue#18243](http://tracker.ceph.com/issues/18243), [pr#12473](http://github.com/ceph/ceph/pull/12473), Jason Dillaman)
- cleanup,rbd: journal: prevent repetitive error messages after being blacklisted ([issue#18243](http://tracker.ceph.com/issues/18243), [pr#12497](http://github.com/ceph/ceph/pull/12497), Jason Dillaman)
- cleanup: Wip ctypos ([pr#12495](http://github.com/ceph/ceph/pull/12495), xianxiaxiao)
- cleanup: fix typos ([pr#12502](http://github.com/ceph/ceph/pull/12502), xianxiaxiao)
- cleanup: remove unused declaration ([pr#12466](http://github.com/ceph/ceph/pull/12466), Li Wang, Yunchuan Wen)
- common: fix clang compilation error ([pr#12565](http://github.com/ceph/ceph/pull/12565), Mykola Golub)
- common: osd/osdmap: fix divide by zero error ([pr#12521](http://github.com/ceph/ceph/pull/12521), Yunchuan Wen)
- common: client/Client.cc: fix/silence “logically dead code” CID-Error ([pr#291](http://github.com/ceph/ceph/pull/291), Yehuda Sadeh)
- core,cleanup: ceph-disk: do not create bluestore wal/db partitions by default ([issue#18291](http://tracker.ceph.com/issues/18291), [pr#12531](http://github.com/ceph/ceph/pull/12531), Loic Dachary)
- core,cleanup: osd/ReplicatedPG: remove redundant check for balance/localize read ([pr#10209](http://github.com/ceph/ceph/pull/10209), runsisi)
- core,cleanup: src: rename ReplicatedPG to PrimaryLogPG ([pr#12487](http://github.com/ceph/ceph/pull/12487), Samuel Just)
- core,performance: osd/PrimaryLogPG: don’t truncate if we don’t have to for WRITEFULL ([pr#12534](http://github.com/ceph/ceph/pull/12534), Samuel Just)
- core,tests: test/rados/list.cc: Memory leak in ceph\_test\_rados\_api\_list ([issue#18250](http://tracker.ceph.com/issues/18250), [pr#12479](http://github.com/ceph/ceph/pull/12479), Brad Hubbard)
- core: mon: make it more clearly to debug for paxos state ([pr#12438](http://github.com/ceph/ceph/pull/12438), song baisen)
- core: FreeBSD/OSD.cc: add client\_messenger to the avoid\_ports set. ([pr#12463](http://github.com/ceph/ceph/pull/12463), Willem Jan Withagen)
- core: ceph.in: allow ‘flags’ to not be present in cmddescs ([issue#18297](http://tracker.ceph.com/issues/18297), [pr#12540](http://github.com/ceph/ceph/pull/12540), Dan Mick)
- core: erasure-code: synchronize with upstream gf-complete ([issue#18092](http://tracker.ceph.com/issues/18092), [pr#12382](http://github.com/ceph/ceph/pull/12382), Loic Dachary)
- core: osd/PG: add “down” pg state (distinct from down+peering) ([pr#12289](http://github.com/ceph/ceph/pull/12289), Sage Weil)
- core: osd/ReplicatedPG::record\_write\_error: don’t leak orig\_reply on cancel ([issue#18180](http://tracker.ceph.com/issues/18180), [pr#12450](http://github.com/ceph/ceph/pull/12450), Samuel Just)
- core: remove spurious executable permissions on source code files ([pr#1061](http://github.com/ceph/ceph/pull/1061), Samuel Just)
- doc: doc/dev/osd\_internals: add pgpool.rst ([pr#12500](http://github.com/ceph/ceph/pull/12500), Brad Hubbard)
- doc: document osd tell bench ([issue#5431](http://tracker.ceph.com/issues/5431), [pr#16](http://github.com/ceph/ceph/pull/16), Sage Weil)
- doc: explain rgw\_fcgi\_socket\_backlog in rgw/config-ref.rst ([pr#12548](http://github.com/ceph/ceph/pull/12548), liuchang0812)
- doc: final additions to 11.1.0-rc release notes ([pr#12448](http://github.com/ceph/ceph/pull/12448), Abhishek Lekshmanan)
- doc: mention corresponding libvirt section in nova.conf ([pr#12584](http://github.com/ceph/ceph/pull/12584), Marc Koderer)
- fs: add snapshot tests to mds thrashing ([pr#1073](http://github.com/ceph/ceph/pull/1073), Yan, Zheng)
- fs: enable ceph-fuse permission checking for all pjd suites ([pr#1187](http://github.com/ceph/ceph/pull/1187), Greg Farnum)
- fs: fix two frag\_enable fragments ([issue#6143](http://tracker.ceph.com/issues/6143), [pr#656](http://github.com/ceph/ceph/pull/656), Sage Weil)
- fs: fix up dd testing again ([issue#10861](http://tracker.ceph.com/issues/10861), [pr#373](http://github.com/ceph/ceph/pull/373), Greg Farnum)
- fs: fuse\_default\_permissions = 0 for kernel build test ([pr#1109](http://github.com/ceph/ceph/pull/1109), Patrick Donnelly)
- fs: unify common parts of sub-suites ([issue#1737](http://tracker.ceph.com/issues/1737), [pr#1282](http://github.com/ceph/ceph/pull/1282), Patrick Donnelly)
- librados: Memory leaks in object\_list\_begin and object\_list\_end ([issue#18252](http://tracker.ceph.com/issues/18252), [pr#12482](http://github.com/ceph/ceph/pull/12482), Brad Hubbard)
- librbd: ignore error when object map is already locked by current client ([issue#16179](http://tracker.ceph.com/issues/16179), [pr#12484](http://github.com/ceph/ceph/pull/12484), runsisi)
- librbd: keep rbd\_default\_features setting as bitmask ([issue#18247](http://tracker.ceph.com/issues/18247), [pr#12486](http://github.com/ceph/ceph/pull/12486), Jason Dillaman)
- librbd: properly order concurrent updates to the object map ([issue#16176](http://tracker.ceph.com/issues/16176), [pr#12420](http://github.com/ceph/ceph/pull/12420), Jason Dillaman)
- librbd: remove image header lock assertions ([issue#18244](http://tracker.ceph.com/issues/18244), [pr#12472](http://github.com/ceph/ceph/pull/12472), Jason Dillaman)
- librbd: use proper snapshot when computing diff parent overlap ([issue#18200](http://tracker.ceph.com/issues/18200), [pr#12396](http://github.com/ceph/ceph/pull/12396), Xiaoxi Chen)
- mds: add tests for mantle (programmable balancer) ([pr#1145](http://github.com/ceph/ceph/pull/1145), Michael Sevilla)
- mds: release pool allocator memory after exceeding size limit ([issue#18225](http://tracker.ceph.com/issues/18225), [pr#12443](http://github.com/ceph/ceph/pull/12443), John Spray)
- osd: Fix map gaps again (bug 15943) ([issue#15943](http://tracker.ceph.com/issues/15943), [pr#12571](http://github.com/ceph/ceph/pull/12571), Samuel Just)
- osd: Increase priority for inactive PGs backfill ([pr#12389](http://github.com/ceph/ceph/pull/12389), Bartłomiej Święcki)
- osd: When deep-scrub errors present upgrade regular scrubs ([pr#12268](http://github.com/ceph/ceph/pull/12268), David Zafman)
- osd: default osd\_scrub\_during\_recovery=false ([pr#12402](http://github.com/ceph/ceph/pull/12402), Sage Weil)
- osd: enhance logging for osd network error ([pr#12458](http://github.com/ceph/ceph/pull/12458), liuchang0812)
- osd: fix CEPH\_OSD\_FLAG\_RWORDERED ([pr#12603](http://github.com/ceph/ceph/pull/12603), Sage Weil)
- osd: force watch PING to be write ordered ([issue#18310](http://tracker.ceph.com/issues/18310), [pr#12590](http://github.com/ceph/ceph/pull/12590), Samuel Just)
- osd: mark queued flag for op ([pr#12352](http://github.com/ceph/ceph/pull/12352), Yunchuan Wen)
- osd: remove the lock heartbeat\_update\_lock, and change [heatbeat\_need\_](http://docs.ceph.com/docs/master/release-notes/#id2334)… ([pr#12461](http://github.com/ceph/ceph/pull/12461), Pan Liu)
- osd: osd/OSDMonitor: accept ‘osd pool set ...’ value as string ([pr#911](http://github.com/ceph/ceph/pull/911), David Zafman)
- osd: ReplicatedPG: don’t bless C\_OSD\_SendMessageOnConn ([issue#13304](http://tracker.ceph.com/issues/13304), [pr#669](http://github.com/ceph/ceph/pull/669), Jason Dillaman)
- osd: PGLog: initialize writeout\_from in PGLog constructor ([issue#12973](http://tracker.ceph.com/issues/12973), [pr#558](http://github.com/ceph/ceph/pull/558), Sage Weil)
- performance,bluestore: os/bluestore: reduce Onode in-memory footprint ([pr#12568](http://github.com/ceph/ceph/pull/12568), Igor Fedotov)
- performance,common: osd/OSDMap: improve the performance of pg\_to\_acting\_osds ([pr#12190](http://github.com/ceph/ceph/pull/12190), Pan Liu)
- rbd,tools: rbd : make option –stripe-unit w/ B/K/M work ([pr#12407](http://github.com/ceph/ceph/pull/12407), Jianpeng Ma)
- rbd: add fsx journal replay test case ([pr#821](http://github.com/ceph/ceph/pull/821), Jason Dillaman)
- rbd: add singleton to assert no rbdmap regression ([issue#14984](http://tracker.ceph.com/issues/14984), [pr#902](http://github.com/ceph/ceph/pull/902), Nathan Cutler)
- rbd: add some missing workunits ([pr#870](http://github.com/ceph/ceph/pull/870), Josh Durgin)
- rbd: added rbd-nbd fsx test case ([pr#1049](http://github.com/ceph/ceph/pull/1049), Jason Dillaman)
- rbd: fix json formatting for image and journal status output ([issue#18261](http://tracker.ceph.com/issues/18261), [pr#12525](http://github.com/ceph/ceph/pull/12525), Mykola Golub)
- rbd: move nbd test workload to separate client host from OSDs ([pr#1170](http://github.com/ceph/ceph/pull/1170), Jason Dillaman)
- rbd: provision volumes to format as XFS ([issue#6693](http://tracker.ceph.com/issues/6693), [pr#1028](http://github.com/ceph/ceph/pull/1028), Loic Dachary)
- rbd: rbd-nbd: invalid error code for “failed to read nbd request” messages ([issue#18242](http://tracker.ceph.com/issues/18242), [pr#12483](http://github.com/ceph/ceph/pull/12483), Mykola Golub)
- rbd: tests with rbd\_skip\_partial\_discard option enabled ([pr#1077](http://github.com/ceph/ceph/pull/1077), Mykola Golub)
- rbd: updated tests to use new rbd default feature set ([pr#842](http://github.com/ceph/ceph/pull/842), Jason Dillaman)
- rgw: add default zone name ([issue#7009](http://tracker.ceph.com/issues/7009), [pr#954](http://github.com/ceph/ceph/pull/954), Orit Wasserman)
- rgw: add option to log custom HTTP headers (rgw\_log\_http\_headers) ([pr#7639](http://github.com/ceph/ceph/pull/7639), Matt Benjamin)
- rgw: add sleep to let the sync agent init ([pr#1136](http://github.com/ceph/ceph/pull/1136), Orit Wasserman)
- rgw: allow fastcgi idle timeout to be adjusted ([pr#230](http://github.com/ceph/ceph/pull/230), Sage Weil)
- rgw: aws4: add presigned url bugfix in runtime ([issue#16463](http://tracker.ceph.com/issues/16463), [pr#10160](http://github.com/ceph/ceph/pull/10160), Javier M. Mellid)
- rgw: data\_extra\_pool is unique per zone ([issue#17025](http://tracker.ceph.com/issues/17025), [pr#1119](http://github.com/ceph/ceph/pull/1119), Orit Wasserman)
- rgw: do not enable both tcp and uds for fastcgi ([issue#5797](http://tracker.ceph.com/issues/5797), [pr#479](http://github.com/ceph/ceph/pull/479), Andrew Schoen)
- rgw: do quota tests on ubuntu ([issue#6382](http://tracker.ceph.com/issues/6382), [pr#635](http://github.com/ceph/ceph/pull/635), Sage Weil)
- rgw: don’t error out on empty owner when setting acls ([issue#6892](http://tracker.ceph.com/issues/6892), [pr#877](http://github.com/ceph/ceph/pull/877), Loic Dachary, Nathan Cutler)
- rgw: fix etag in multipart complete ([issue#17794](http://tracker.ceph.com/issues/17794), [issue#6830](http://tracker.ceph.com/issues/6830), [issue#16129](http://tracker.ceph.com/issues/16129), [issue#17872](http://tracker.ceph.com/issues/17872), [pr#1269](http://github.com/ceph/ceph/pull/1269), Casey Bodley, Orit Wasserman)
- rgw: fix indentation for cache\_pools ([issue#8295](http://tracker.ceph.com/issues/8295), [pr#251](http://github.com/ceph/ceph/pull/251), Sage Weil)
- rgw: move xfs to a seperate directory ([pr#969](http://github.com/ceph/ceph/pull/969), Orit Wasserman)
- rgw: policy acl format should be xml ([pr#946](http://github.com/ceph/ceph/pull/946), Orit Wasserman)
- rgw: split osd’s in 2 nodes ([issue#15612](http://tracker.ceph.com/issues/15612), [pr#1019](http://github.com/ceph/ceph/pull/1019), Vasu Kulkarni)
- rgw: use civetweb if no frontend was configured ([pr#958](http://github.com/ceph/ceph/pull/958), Orit Wasserman)
- rgw: use explicit flag to cancel RGWCoroutinesManager::run() ([issue#17465](http://tracker.ceph.com/issues/17465), [pr#12452](http://github.com/ceph/ceph/pull/12452), Casey Bodley)
- rgw: we don’t support btrfs any more ([pr#1132](http://github.com/ceph/ceph/pull/1132), Orit Wasserman)
- tests,bluestore: os/bluestore: add UT for an estimation of Onode in-memory size ([pr#12532](http://github.com/ceph/ceph/pull/12532), Igor Fedotov)
- tests,rbd: qa/workunits/rbd: fix ([issue#18271](http://tracker.ceph.com/issues/18271), [pr#12511](http://github.com/ceph/ceph/pull/12511), Sage Weil)
- tests: qa/tasks/admin\_socket: subst in repo name ([pr#12508](http://github.com/ceph/ceph/pull/12508), Sage Weil)
- tests: qa/tasks/ceph\_deploy: use dev option instead of dev-commit ([pr#12514](http://github.com/ceph/ceph/pull/12514), Vasu Kulkarni)
- tests: qa/tasks/osd\_backfill.py: wait for osd.\[12\] to start ([issue#18303](http://tracker.ceph.com/issues/18303), [pr#12577](http://github.com/ceph/ceph/pull/12577), Sage Weil)
- tests: qa/workunits: include extension for nose tests ([pr#12572](http://github.com/ceph/ceph/pull/12572), Sage Weil)
- tests: qa: fixed script to schedule rados and other suites with –subset option ([pr#12587](http://github.com/ceph/ceph/pull/12587), Yuri Weinstein)
- tests: unittest\_throttle avoid ASSERT\_DEATH ([issue#18036](http://tracker.ceph.com/issues/18036), [pr#12393](http://github.com/ceph/ceph/pull/12393), Loic Dachary)
- tests: merge ceph-qa-suite
- tests: paxos fixes ([issue#11913](http://tracker.ceph.com/issues/11913), [pr#457](http://github.com/ceph/ceph/pull/457), John Spray)
- tools: cleanup phase of cephfs-data-scan ([pr#12337](http://github.com/ceph/ceph/pull/12337), Vishal Kanaujia)
- tools: osdmaptool: fix divide by zero error ([pr#12561](http://github.com/ceph/ceph/pull/12561), Yunchuan Wen)
- tools: rados: optionally support reading omap key from file ([issue#18123](http://tracker.ceph.com/issues/18123), [pr#12286](http://github.com/ceph/ceph/pull/12286), Jason Dillaman)
- tools: ceph-post-file: single command to upload a file to cephdrop ([pr#505](http://github.com/ceph/ceph/pull/505), Dan Mick, Travis Rhoden)
- tools: osdmaptool: additional tests ([pr#1196](http://github.com/ceph/ceph/pull/1196), Sage Weil)
