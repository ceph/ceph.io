---
title: "v12.2.3 Luminous released"
date: "2018-02-21"
author: "TheAnalyst"
tags:
  - "release"
  - "luminous"
---

This is the third bugfix release of Luminous v12.2.x long term stable release series. It contains a range of bug fixes and a few features across Bluestore, CephFS, RBD & RGW. We recommend all the users of 12.2.x series update.

### Notable Changes

- _CephFS_:
    - The CephFS client now checks for older kernels’ inability to reliably clear dentries from the kernel dentry cache. The new option client\_die\_on\_failed\_dentry\_invalidate (default: true) may be turned off to allow the client to proceed (dangerous!).

### Other Notable Changes

- bluestore: do not crash on over-large objects ([issue#22161](http://tracker.ceph.com/issues/22161), [pr#19630](https://github.com/ceph/ceph/pull/19630), Sage Weil)
- bluestore: OSD crash on boot with assert caused by Bluefs on flush write ([issue#21932](http://tracker.ceph.com/issues/21932), [pr#19047](https://github.com/ceph/ceph/pull/19047), Jianpeng Ma)
- build/ops: ceph-base symbols not stripped in debs ([issue#22640](http://tracker.ceph.com/issues/22640), [pr#19969](https://github.com/ceph/ceph/pull/19969), Sage Weil)
- build/ops: ceph-conf: dump parsed config in plain text or as json ([issue#21862](http://tracker.ceph.com/issues/21862), [pr#18842](https://github.com/ceph/ceph/pull/18842), Piotr Dałek)
- build/ops: ceph-mgr dashboard has dependency on python-jinja2 ([issue#22457](http://tracker.ceph.com/issues/22457), [pr#19865](https://github.com/ceph/ceph/pull/19865), John Spray)
- build/ops: ceph-volume fails when centos7 image doesn’t have lvm2 installed ([issue#22443](http://tracker.ceph.com/issues/22443), [issue#22217](http://tracker.ceph.com/issues/22217), [pr#20215](https://github.com/ceph/ceph/pull/20215), Nathan Cutler, Theofilos Mouratidis)
- build/ops: Default kernel.pid\_max is easily exceeded during recovery on high OSD-count system ([issue#21929](http://tracker.ceph.com/issues/21929), [pr#19133](https://github.com/ceph/ceph/pull/19133), David Disseldorp, Kefu Chai)
- build/ops: install-deps.sh: revert gcc to the one shipped by distro ([issue#22220](http://tracker.ceph.com/issues/22220), [pr#19680](https://github.com/ceph/ceph/pull/19680), Kefu Chai)
- build/ops: luminous build fails with –without-radosgw ([issue#22321](http://tracker.ceph.com/issues/22321), [pr#19483](https://github.com/ceph/ceph/pull/19483), Jason Dillaman)
- build/ops: move ceph-\*-tool binaries out of ceph-test subpackage ([issue#22319](http://tracker.ceph.com/issues/22319), [issue#21762](http://tracker.ceph.com/issues/21762), [pr#19355](https://github.com/ceph/ceph/pull/19355), liuchang0812, Nathan Cutler, Kefu Chai, Sage Weil)
- build.ops: rpm: adjust ceph-{osdomap,kvstore,monstore}-tool feature move ([issue#22558](http://tracker.ceph.com/issues/22558), [pr#19839](https://github.com/ceph/ceph/pull/19839), Kefu Chai)
- ceph: cluster \[ERR\] Unhandled exception from module ‘balancer’ while running on mgr.x: ‘NoneType’ object has no attribute ‘iteritems’” in cluster log ([issue#22090](http://tracker.ceph.com/issues/22090), [pr#19023](https://github.com/ceph/ceph/pull/19023), Sage Weil)
- cephfs: cephfs-journal-tool: add “set pool\_id” option ([issue#22631](http://tracker.ceph.com/issues/22631), [pr#20085](https://github.com/ceph/ceph/pull/20085), dongdong tao)
- cephfs: cephfs-journal-tool: tool would miss to report some invalid range ([issue#22459](http://tracker.ceph.com/issues/22459), [pr#19626](https://github.com/ceph/ceph/pull/19626), dongdong tao)
- cephfs: cephfs: potential adjust failure in lru\_expire ([issue#22458](http://tracker.ceph.com/issues/22458), [pr#19627](https://github.com/ceph/ceph/pull/19627), dongdong tao)
- cephfs: “ceph tell mds” commands result in “File exists” errors on client admin socket ([issue#21406](http://tracker.ceph.com/issues/21406), [issue#21967](http://tracker.ceph.com/issues/21967), [pr#18831](https://github.com/ceph/ceph/pull/18831), Patrick Donnelly)
- cephfs: client: anchor Inode while trimming caps ([issue#22157](http://tracker.ceph.com/issues/22157), [pr#19105](https://github.com/ceph/ceph/pull/19105), Patrick Donnelly)
- cephfs: client: avoid recursive lock in ll\_get\_vino ([issue#22629](http://tracker.ceph.com/issues/22629), [pr#20086](https://github.com/ceph/ceph/pull/20086), dongdong tao)
- cephfs: client: dual client segfault with racing ceph\_shutdown ([issue#21512](http://tracker.ceph.com/issues/21512), [issue#20988](http://tracker.ceph.com/issues/20988), [pr#20082](https://github.com/ceph/ceph/pull/20082), Jeff Layton)
- cephfs: client: implement delegation support in userland cephfs ([issue#18490](http://tracker.ceph.com/issues/18490), [pr#19480](https://github.com/ceph/ceph/pull/19480), Jeff Layton)
- cephfs: client: quit on failed remount during dentry invalidate test #19218 ([issue#22269](http://tracker.ceph.com/issues/22269), [pr#19370](https://github.com/ceph/ceph/pull/19370), Patrick Donnelly)
- cephfs: List of filesystems does not get refreshed after a filesystem deletion ([issue#21599](http://tracker.ceph.com/issues/21599), [pr#18730](https://github.com/ceph/ceph/pull/18730), John Spray)
- cephfs: MDS : Avoid the assert failure when the inode for the cap\_export from other… ([issue#22610](http://tracker.ceph.com/issues/22610), [pr#20300](https://github.com/ceph/ceph/pull/20300), Jianyu Li)
- cephfs: MDSMonitor: monitor gives constant “is now active in filesystem cephfs as rank” cluster log info messages ([issue#21959](http://tracker.ceph.com/issues/21959), [pr#19055](https://github.com/ceph/ceph/pull/19055), Patrick Donnelly)
- cephfs: racy is\_mounted() checks in libcephfs ([issue#21025](http://tracker.ceph.com/issues/21025), [pr#17875](https://github.com/ceph/ceph/pull/17875), Jeff Layton)
- cephfs: src/mds/MDCache.cc: 7421: FAILED assert(CInode::count() == inode\_map.size() + snap\_inode\_map.size()) ([issue#21928](http://tracker.ceph.com/issues/21928), [pr#18912](https://github.com/ceph/ceph/pull/18912), “Yan, Zheng”)
- cephfs: vstart\_runner: fixes for recent cephfs changes ([issue#22526](http://tracker.ceph.com/issues/22526), [pr#19829](https://github.com/ceph/ceph/pull/19829), Patrick Donnelly)
- ceph-volume: adds a –destroy flag to ceph-volume lvm zap ([issue#22653](http://tracker.ceph.com/issues/22653), [pr#20240](https://github.com/ceph/ceph/pull/20240), Andrew Schoen)
- ceph-volume: adds success messages for lvm prepare/activate/create ([issue#22307](http://tracker.ceph.com/issues/22307), [pr#20238](https://github.com/ceph/ceph/pull/20238), Andrew Schoen)
- ceph-volume: dmcrypt support for lvm ([issue#22619](http://tracker.ceph.com/issues/22619), [pr#20241](https://github.com/ceph/ceph/pull/20241), Alfredo Deza)
- ceph-volume dmcrypt support for simple ([issue#22620](http://tracker.ceph.com/issues/22620), [pr#20350](https://github.com/ceph/ceph/pull/20350), Andrew Schoen, Alfredo Deza)
- ceph-volume: do not use –key during mkfs ([issue#22283](http://tracker.ceph.com/issues/22283), [pr#20244](https://github.com/ceph/ceph/pull/20244), Kefu Chai, Sage Weil)
- ceph-volume: fix usage of the –osd-id flag ([issue#22642](http://tracker.ceph.com/issues/22642), [issue#22836](http://tracker.ceph.com/issues/22836), [pr#20323](https://github.com/ceph/ceph/pull/20323), Andrew Schoen)
- ceph-volume Format correctly when vg/lv cannot be used ([issue#22299](http://tracker.ceph.com/issues/22299), [pr#19527](https://github.com/ceph/ceph/pull/19527), Alfredo Deza)
- ceph-volume handle inline comments in the ceph.conf file ([issue#22297](http://tracker.ceph.com/issues/22297), [pr#19532](https://github.com/ceph/ceph/pull/19532), Alfredo Deza)
- ceph-volume: handle leading whitespace/tabs in ceph.conf ([issue#22280](http://tracker.ceph.com/issues/22280), [pr#19526](https://github.com/ceph/ceph/pull/19526), Alfredo Deza)
- ceph-volume: lvm zap will unmount osd paths used by zapped devices ([issue#22876](http://tracker.ceph.com/issues/22876), [pr#20438](https://github.com/ceph/ceph/pull/20438), Andrew Schoen)
- ceph-volume: removed the explicit use of sudo ([issue#22282](http://tracker.ceph.com/issues/22282), [pr#19525](https://github.com/ceph/ceph/pull/19525), Andrew Schoen)
- ceph-volume rollback on failed OSD prepare/create ([issue#22281](http://tracker.ceph.com/issues/22281), [pr#20237](https://github.com/ceph/ceph/pull/20237), Alfredo Deza)
- ceph-volume should be able to handle multiple LVM (VG/LV) tags ([issue#22305](http://tracker.ceph.com/issues/22305), [pr#19528](https://github.com/ceph/ceph/pull/19528), Alfredo Deza)
- ceph-volume use realpath when checking mounts ([issue#22988](http://tracker.ceph.com/issues/22988), [pr#20429](https://github.com/ceph/ceph/pull/20429), Alfredo Deza)
- ceph-volume: warn on missing ceph.conf file ([issue#22326](http://tracker.ceph.com/issues/22326), [pr#19530](https://github.com/ceph/ceph/pull/19530), Alfredo Deza)
- common: compute SimpleLRU’s size with contents.size() instead of lru.… ([issue#22613](http://tracker.ceph.com/issues/22613), [pr#19977](https://github.com/ceph/ceph/pull/19977), Xuehan Xu)
- config: lower default omap entries recovered at once ([issue#21897](http://tracker.ceph.com/issues/21897), [pr#19928](https://github.com/ceph/ceph/pull/19928), Josh Durgin)
- core: backoff causes out of order op ([issue#21407](http://tracker.ceph.com/issues/21407), [pr#18747](https://github.com/ceph/ceph/pull/18747), Sage Weil)
- core: common/throttle: start using 64-bit values ([issue#22539](http://tracker.ceph.com/issues/22539), [pr#19995](https://github.com/ceph/ceph/pull/19995), Igor Fedotov)
- core: fix broken use of streamstream::rdbuf() ([issue#22715](http://tracker.ceph.com/issues/22715), [pr#20042](https://github.com/ceph/ceph/pull/20042), Sage Weil)
- core: possible deadlock in various maintenance operations ([issue#22120](http://tracker.ceph.com/issues/22120), [pr#19123](https://github.com/ceph/ceph/pull/19123), Jason Dillaman)
- core: \_read\_bdev\_label unable to decode label at offset ([issue#22285](http://tracker.ceph.com/issues/22285), [pr#20326](https://github.com/ceph/ceph/pull/20326), Sage Weil)
- core: rocksdb: fixes early metadata spill over to slow device in ([issue#22264](http://tracker.ceph.com/issues/22264), [pr#19257](https://github.com/ceph/ceph/pull/19257), Igor Fedotov)
- core: Various odd clog messages for mons ([issue#22082](http://tracker.ceph.com/issues/22082), [pr#19031](https://github.com/ceph/ceph/pull/19031), John Spray)
- crush: balancer crush-compat sends “foo” command ([issue#22361](http://tracker.ceph.com/issues/22361), [pr#19555](https://github.com/ceph/ceph/pull/19555), John Spray)
- doc: crush\_ruleset is invalid command in luminous ([issue#20559](http://tracker.ceph.com/issues/20559), [pr#19446](https://github.com/ceph/ceph/pull/19446), Nathan Cutler)
- doc: doc/rbd: tweaks for the LIO iSCSI gateway ([issue#21763](http://tracker.ceph.com/issues/21763), [pr#20213](https://github.com/ceph/ceph/pull/20213), Ashish Singh, Mike Christie, Jason Dillaman)
- doc: man page for mount.fuse.ceph ([issue#21539](http://tracker.ceph.com/issues/21539), [issue#22595](http://tracker.ceph.com/issues/22595), [pr#19449](https://github.com/ceph/ceph/pull/19449), Jos Collin)
- doc: misc fixes for CephFS best practices ([issue#22630](http://tracker.ceph.com/issues/22630), [pr#19858](https://github.com/ceph/ceph/pull/19858), Jos Collin)
- doc: remove region from “INSTALL CEPH OBJECT GATEWAY” ([issue#21610](http://tracker.ceph.com/issues/21610), [pr#18865](https://github.com/ceph/ceph/pull/18865), Orit Wasserman)
- doc: update Blacklisting and OSD epoch barrier ([issue#22542](http://tracker.ceph.com/issues/22542), [pr#19741](https://github.com/ceph/ceph/pull/19741), Jos Collin)
- librbd: cannot clone all image-metas if we have more than 64 key/value pairs ([issue#21814](http://tracker.ceph.com/issues/21814), [pr#19503](https://github.com/ceph/ceph/pull/19503), PCzhangPC)
- librbd: cannot copy all image-metas if we have more than 64 key/value pairs ([issue#21815](http://tracker.ceph.com/issues/21815), [pr#19504](https://github.com/ceph/ceph/pull/19504), PCzhangPC)
- librbd: compare and write against a clone can result in failure ([issue#20789](http://tracker.ceph.com/issues/20789), [pr#20211](https://github.com/ceph/ceph/pull/20211), Mykola Golub, Jason Dillaman)
- librbd: default to sparse-reads for any IO operation over 64K ([issue#21849](http://tracker.ceph.com/issues/21849), [pr#20208](https://github.com/ceph/ceph/pull/20208), Jason Dillaman)
- librbd: fix snap create/rm may taking long time ([issue#22716](http://tracker.ceph.com/issues/22716), [pr#20153](https://github.com/ceph/ceph/pull/20153), Song Shun)
- librbd: force removal of a snapshot cannot ignore dependent children ([issue#22791](http://tracker.ceph.com/issues/22791), [pr#20135](https://github.com/ceph/ceph/pull/20135), Jason Dillaman)
- librbd: Image-meta should be dynamically refreshed ([issue#21529](http://tracker.ceph.com/issues/21529), [pr#19447](https://github.com/ceph/ceph/pull/19447), Dongsheng Yang, Jason Dillaman)
- librbd: journal should ignore -EILSEQ errors from compare-and-write ([issue#21628](http://tracker.ceph.com/issues/21628), [pr#20206](https://github.com/ceph/ceph/pull/20206), Jason Dillaman)
- librbd: refresh image after applying new/removing old metadata ([issue#21711](http://tracker.ceph.com/issues/21711), [pr#19485](https://github.com/ceph/ceph/pull/19485), Jason Dillaman)
- librbd: set deleted parent pointer to null ([issue#22158](http://tracker.ceph.com/issues/22158), [pr#20210](https://github.com/ceph/ceph/pull/20210), Jason Dillaman)
- luminous: ceph-fuse: ::rmdir() uses a deleted memory structure of dentry leads … ([issue#22536](http://tracker.ceph.com/issues/22536), [pr#19968](https://github.com/ceph/ceph/pull/19968), YunfeiGuan)
- mds: check for CEPH\_OSDMAP\_FULL is now wrong; cluster full flag is obsolete ([issue#22483](http://tracker.ceph.com/issues/22483), [pr#19830](https://github.com/ceph/ceph/pull/19830), Patrick Donnelly)
- mds: don’t check gid when none specified in auth caps ([issue#22009](http://tracker.ceph.com/issues/22009), [pr#18835](https://github.com/ceph/ceph/pull/18835), Douglas Fuller)
- mds: don’t delay processing completed requests in replay queue ([issue#22163](http://tracker.ceph.com/issues/22163), [pr#19157](https://github.com/ceph/ceph/pull/19157), “Yan, Zheng”)
- mds: don’t report repaired backtraces in damagetable, write back after repair, clean up scrub log ([issue#18743](http://tracker.ceph.com/issues/18743), [issue#22058](http://tracker.ceph.com/issues/22058), [pr#20341](https://github.com/ceph/ceph/pull/20341), “Yan, Zheng”, John Spray)
- mds: fix CDir::log\_mark\_dirty() ([issue#21584](http://tracker.ceph.com/issues/21584), [pr#18008](https://github.com/ceph/ceph/pull/18008), “Yan, Zheng”)
- mds: fix dump last\_sent ([issue#22562](http://tracker.ceph.com/issues/22562), [pr#19959](https://github.com/ceph/ceph/pull/19959), dongdong tao)
- mds: fix MDS\_FEATURE\_INCOMPAT\_FILE\_LAYOUT\_V2 definition ([issue#21985](http://tracker.ceph.com/issues/21985), [pr#18782](https://github.com/ceph/ceph/pull/18782), “Yan, Zheng”)
- mds: fix return value of MDCache::dump\_cache ([issue#22798](http://tracker.ceph.com/issues/22798), [pr#20121](https://github.com/ceph/ceph/pull/20121), “Yan, Zheng”)
- mds: fix scrub crash ([issue#22730](http://tracker.ceph.com/issues/22730), [pr#20249](https://github.com/ceph/ceph/pull/20249), dongdong tao)
- mds: fix StrayManager::truncate() ([issue#21091](http://tracker.ceph.com/issues/21091), [pr#18019](https://github.com/ceph/ceph/pull/18019), “Yan, Zheng”)
- mds: handle client reconnect gather race ([issue#22263](http://tracker.ceph.com/issues/22263), [pr#19326](https://github.com/ceph/ceph/pull/19326), “Yan, Zheng”)
- mds: handle client session messages when mds is stopping ([issue#22460](http://tracker.ceph.com/issues/22460), [pr#19585](https://github.com/ceph/ceph/pull/19585), “Yan, Zheng”)
- mds: handle ‘inode gets queued for recovery multiple times’ ([issue#22647](http://tracker.ceph.com/issues/22647), [pr#19982](https://github.com/ceph/ceph/pull/19982), “Yan, Zheng”)
- mds: ignore export pin for unlinked directory ([issue#22219](http://tracker.ceph.com/issues/22219), [pr#19360](https://github.com/ceph/ceph/pull/19360), “Yan, Zheng”)
- mds: limit size of subtree migration ([issue#21892](http://tracker.ceph.com/issues/21892), [pr#20339](https://github.com/ceph/ceph/pull/20339), “Yan, Zheng”)
- mds: no assertion on inode being purging in find\_ino\_peers() ([issue#21722](http://tracker.ceph.com/issues/21722), [pr#18869](https://github.com/ceph/ceph/pull/18869), Zhi Zhang)
- mds: preserve order of requests during recovery of multimds cluster ([issue#21843](http://tracker.ceph.com/issues/21843), [pr#18871](https://github.com/ceph/ceph/pull/18871), “Yan, Zheng”)
- mds: prevent filelock from being stuck at XSYN state ([issue#22008](http://tracker.ceph.com/issues/22008), [pr#20340](https://github.com/ceph/ceph/pull/20340), “Yan, Zheng”)
- mds: properly eval locks after importing inode ([issue#22357](http://tracker.ceph.com/issues/22357), [pr#19646](https://github.com/ceph/ceph/pull/19646), “Yan, Zheng”)
- mds: reduce debugging level for balancer messages ([issue#21853](http://tracker.ceph.com/issues/21853), [pr#19827](https://github.com/ceph/ceph/pull/19827), Patrick Donnelly)
- mds: respect mds\_client\_writeable\_range\_max\_inc\_objs config ([issue#22492](http://tracker.ceph.com/issues/22492), [pr#19776](https://github.com/ceph/ceph/pull/19776), “Yan, Zheng”)
- mds: set higher priority for some perf counters ([issue#22776](http://tracker.ceph.com/issues/22776), [pr#20299](https://github.com/ceph/ceph/pull/20299), Shangzhong Zhu)
- mds: set PRIO\_USEFUL on num\_sessions counter ([issue#21927](http://tracker.ceph.com/issues/21927), [pr#18722](https://github.com/ceph/ceph/pull/18722), John Spray)
- mds: tell session ls returns vanila EINVAL when MDS is not active ([issue#21991](http://tracker.ceph.com/issues/21991), [pr#19505](https://github.com/ceph/ceph/pull/19505), Jos Collin)
- mds: track dirty dentries in separate list ([issue#19578](http://tracker.ceph.com/issues/19578), [pr#19775](https://github.com/ceph/ceph/pull/19775), “Yan, Zheng”)
- mds: trim ‘N’ log segments according to how many log segments are there ([issue#21975](http://tracker.ceph.com/issues/21975), [pr#18783](https://github.com/ceph/ceph/pull/18783), “Yan, Zheng”)
- mgr: ceph-mgr spuriously reloading OSD metadata on map changes ([issue#21159](http://tracker.ceph.com/issues/21159), [pr#18732](https://github.com/ceph/ceph/pull/18732), Yanhu Cao)
- mgr: disconnect unregistered service daemon when report received ([issue#22286](http://tracker.ceph.com/issues/22286), [pr#20089](https://github.com/ceph/ceph/pull/20089), Jason Dillaman)
- mgr: KeyError: (‘name’,) in balancer rm ([issue#22470](http://tracker.ceph.com/issues/22470), [pr#19624](https://github.com/ceph/ceph/pull/19624), Dan van der Ster)
- mgr: Manager daemon x is unresponsive. No standby daemons available ([issue#21147](http://tracker.ceph.com/issues/21147), [pr#19501](https://github.com/ceph/ceph/pull/19501), Sage Weil)
- mgr: mgr/balancer/upmap\_max\_iterations must be cast to integer ([issue#22429](http://tracker.ceph.com/issues/22429), [pr#19553](https://github.com/ceph/ceph/pull/19553), Dan van der Ster)
- mgr: mgr/dashboard: added iSCSI IOPS/throughput metrics ([issue#21391](http://tracker.ceph.com/issues/21391), [pr#20209](https://github.com/ceph/ceph/pull/20209), Jason Dillaman)
- mgr: mgr/dashboard: Fix PG status coloring ([issue#22615](http://tracker.ceph.com/issues/22615), [pr#19844](https://github.com/ceph/ceph/pull/19844), Wido den Hollander)
- mgr: mgr/prometheus: add missing ‘deep’ state to PG\_STATES in ceph-mgr pro… ([issue#22116](http://tracker.ceph.com/issues/22116), [pr#19929](https://github.com/ceph/ceph/pull/19929), Jan Fajerski, Peter Woodman)
- mgr: mgr tests don’t indicate failure if exception thrown from serve() ([issue#21999](http://tracker.ceph.com/issues/21999), [pr#18832](https://github.com/ceph/ceph/pull/18832), John Spray)
- mgr: mgr\[zabbix\] float division by zero (osd\[‘kb’\] = 0) ([issue#21904](http://tracker.ceph.com/issues/21904), [pr#19048](https://github.com/ceph/ceph/pull/19048), Ilja Slepnev)
- mgr: prometheus: added osd commit/apply latency metrics (#22718) ([issue#22718](http://tracker.ceph.com/issues/22718), [pr#20084](https://github.com/ceph/ceph/pull/20084), Konstantin Shalygin)
- mgr: pybind/mgr/dashboard: fix duplicated slash in html href ([issue#22851](http://tracker.ceph.com/issues/22851), [pr#20325](https://github.com/ceph/ceph/pull/20325), Shengjing Zhu)
- mgr: pybind/mgr/dashboard: fix reverse proxy support ([issue#22557](http://tracker.ceph.com/issues/22557), [pr#20182](https://github.com/ceph/ceph/pull/20182), Nick Erdmann, Kefu Chai)
- mgr: pybind/mgr/prometheus: fix metric type undef -> untyped ([issue#22313](http://tracker.ceph.com/issues/22313), [pr#19834](https://github.com/ceph/ceph/pull/19834), Ilya Margolin)
- mgr: restarting active ceph-mgr cause glitches in bps and iops metrics ([issue#21773](http://tracker.ceph.com/issues/21773), [pr#18735](https://github.com/ceph/ceph/pull/18735), Aleksei Gutikov, Kefu Chai)
- mgr: Services reported with blank hostname ([issue#20887](http://tracker.ceph.com/issues/20887), [issue#21687](http://tracker.ceph.com/issues/21687), [pr#17869](https://github.com/ceph/ceph/pull/17869), liuchang0812, Chang Liu)
- mon: do not use per\_pool\_sum\_delta to show recovery summary ([issue#22727](http://tracker.ceph.com/issues/22727), [pr#20150](https://github.com/ceph/ceph/pull/20150), Chang Liu)
- mon: fix mgr using auth\_client\_required policy ([issue#22096](http://tracker.ceph.com/issues/22096), [pr#20156](https://github.com/ceph/ceph/pull/20156), John Spray)
- mon: MDSMonitor: reject misconfigured mds\_blacklist\_interval ([issue#21821](http://tracker.ceph.com/issues/21821), [pr#19871](https://github.com/ceph/ceph/pull/19871), John Spray)
- mon/MgrMonitor: limit mgrmap history ([issue#22257](http://tracker.ceph.com/issues/22257), [pr#19187](https://github.com/ceph/ceph/pull/19187), Sage Weil)
- mon: reenable timer to send digest when paxos is temporarily inactive ([issue#22142](http://tracker.ceph.com/issues/22142), [pr#19481](https://github.com/ceph/ceph/pull/19481), Jan Fajerski)
- msg: msg/async/AsyncConnection.cc: 1835: FAILED assert(state == STATE\_CLOSED) ([issue#21883](http://tracker.ceph.com/issues/21883), [pr#18746](https://github.com/ceph/ceph/pull/18746), Haomai Wang)
- msg: msg/async: unregister connection failed when racing happened ([issue#22437](http://tracker.ceph.com/issues/22437), [pr#19552](https://github.com/ceph/ceph/pull/19552), Haomai Wang)
- osdc: “FAILED assert(bh->last\_write\_tid > tid)” in powercycle-wip-yuri-master-1.19.18-distro-basic-smithi ([issue#22741](http://tracker.ceph.com/issues/22741), [pr#20256](https://github.com/ceph/ceph/pull/20256), “Yan, Zheng”)
- osdc/Journaler: add ‘stopping’ check to various finish callbacks ([issue#22360](http://tracker.ceph.com/issues/22360), [pr#19610](https://github.com/ceph/ceph/pull/19610), “Yan, Zheng”)
- osdc/Objecter: objecter op\_send\_bytes perf counter always 0 ([issue#21982](http://tracker.ceph.com/issues/21982), [pr#19046](https://github.com/ceph/ceph/pull/19046), Jianpeng Ma)
- osd: do not check out-of-date osdmap for DESTROYED flag on start ([issue#22673](http://tracker.ceph.com/issues/22673), [pr#20068](https://github.com/ceph/ceph/pull/20068), Sage Weil)
- osd,mgr: report pending creating pgs to mgr ([issue#22440](http://tracker.ceph.com/issues/22440), [pr#20204](https://github.com/ceph/ceph/pull/20204), Kefu Chai)
- osd: miscounting degraded objects and PG stuck in recovery\_unfound ([issue#22145](http://tracker.ceph.com/issues/22145), [pr#20055](https://github.com/ceph/ceph/pull/20055), Sage Weil, David Zafman)
- osd: Objecter::C\_ObjectOperation\_sparse\_read throws/catches exceptions on -ENOENT ([issue#21844](http://tracker.ceph.com/issues/21844), [pr#18744](https://github.com/ceph/ceph/pull/18744), Jason Dillaman)
- osd: Objecter::\_send\_op unnecessarily constructs costly hobject\_t ([issue#21845](http://tracker.ceph.com/issues/21845), [pr#18745](https://github.com/ceph/ceph/pull/18745), Jason Dillaman)
- osd: On pg repair the primary is not favored as was intended ([issue#21907](http://tracker.ceph.com/issues/21907), [pr#19083](https://github.com/ceph/ceph/pull/19083), David Zafman)
- osd: OSD crushes with FAILED assert(used\_blocks.size() > count) during the first start after upgrade 12.2.1 -> 12.2.2 ([issue#22535](http://tracker.ceph.com/issues/22535), [pr#19888](https://github.com/ceph/ceph/pull/19888), Igor Fedotov)
- osd: OSDMap cache assert on shutdown ([issue#21737](http://tracker.ceph.com/issues/21737), [pr#18749](https://github.com/ceph/ceph/pull/18749), Greg Farnum)
- osd: OSDService::recovery\_need\_sleep read+updated without locking ([issue#21566](http://tracker.ceph.com/issues/21566), [pr#18753](https://github.com/ceph/ceph/pull/18753), Neha Ojha)
- osd: “osd status” command exception if OSD not in pgmap stats ([issue#21707](http://tracker.ceph.com/issues/21707), [pr#19084](https://github.com/ceph/ceph/pull/19084), Yanhu Cao)
- osd, pg, mgr: make snap trim queue problems visible ([issue#22448](http://tracker.ceph.com/issues/22448), [pr#20098](https://github.com/ceph/ceph/pull/20098), Piotr Dałek)
- osd: Pool Compression type option doesn’t apply to new OSDs ([issue#22419](http://tracker.ceph.com/issues/22419), [pr#20106](https://github.com/ceph/ceph/pull/20106), Kefu Chai)
- osd: replica read can trigger cache promotion ([issue#20919](http://tracker.ceph.com/issues/20919), [pr#19499](https://github.com/ceph/ceph/pull/19499), Sage Weil)
- osd/ReplicatedPG.cc: recover\_replicas: object added to missing set for backfill, but is not in recovering, error! ([issue#21382](http://tracker.ceph.com/issues/21382), [issue#14513](http://tracker.ceph.com/issues/14513), [issue#18162](http://tracker.ceph.com/issues/18162), [pr#20081](https://github.com/ceph/ceph/pull/20081), David Zafman)
- osd: subscribe osdmaps if any pending pgs ([issue#22113](http://tracker.ceph.com/issues/22113), [pr#19059](https://github.com/ceph/ceph/pull/19059), Kefu Chai)
- osd: “sudo cp /var/lib/ceph/osd/ceph-0/fsid …” fails ([issue#20736](http://tracker.ceph.com/issues/20736), [pr#19631](https://github.com/ceph/ceph/pull/19631), Patrick Donnelly)
- os: fix 0-length zero semantics, test ([issue#21712](http://tracker.ceph.com/issues/21712), [pr#20049](https://github.com/ceph/ceph/pull/20049), Sage Weil)
- qa/tests: Applied PR 20053 to stress-split tests ([issue#22665](http://tracker.ceph.com/issues/22665), [pr#20451](https://github.com/ceph/ceph/pull/20451), Yuri Weinstein)
- rbd: abort in listing mapped nbd devices when running in a container ([issue#22012](http://tracker.ceph.com/issues/22012), [issue#22011](http://tracker.ceph.com/issues/22011), [pr#19051](https://github.com/ceph/ceph/pull/19051), Li Wang)
- rbd: \[api\] compare-and-write methods not properly advertised ([issue#22036](http://tracker.ceph.com/issues/22036), [pr#18834](https://github.com/ceph/ceph/pull/18834), Jason Dillaman)
- rbd: class rbd.Image discard—-OSError: \[errno 2147483648\] error discarding region ([issue#21966](http://tracker.ceph.com/issues/21966), [pr#19058](https://github.com/ceph/ceph/pull/19058), Jason Dillaman)
- rbd: cluster resource agent ocf:ceph:rbd - wrong permissions ([issue#22362](http://tracker.ceph.com/issues/22362), [pr#19554](https://github.com/ceph/ceph/pull/19554), Nathan Cutler)
- rbd: disk usage on empty pool no longer returns an error message ([issue#22200](http://tracker.ceph.com/issues/22200), [pr#19107](https://github.com/ceph/ceph/pull/19107), Jason Dillaman)
- rbd: fix crash during map ([issue#21808](http://tracker.ceph.com/issues/21808), [pr#18698](https://github.com/ceph/ceph/pull/18698), Peter Keresztes Schmidt)
- rbd: \[journal\] tags are not being expired if no other clients are registered ([issue#21960](http://tracker.ceph.com/issues/21960), [pr#18840](https://github.com/ceph/ceph/pull/18840), Jason Dillaman)
- rbd: librbd: filter out potential race with image rename ([issue#18435](http://tracker.ceph.com/issues/18435), [pr#19853](https://github.com/ceph/ceph/pull/19853), Jason Dillaman)
- rbd-mirror: Allow a different data-pool to be used on the secondary cluster ([issue#21088](http://tracker.ceph.com/issues/21088), [pr#19305](https://github.com/ceph/ceph/pull/19305), Adam Wolfe Gordon)
- rbd-mirror: primary image should register in remote, non-primary image’s journal ([issue#21961](http://tracker.ceph.com/issues/21961), [issue#21561](http://tracker.ceph.com/issues/21561), [pr#20207](https://github.com/ceph/ceph/pull/20207), Jason Dillaman)
- rbd-mirror: sync image metadata when transfering remote image ([issue#21535](http://tracker.ceph.com/issues/21535), [pr#19484](https://github.com/ceph/ceph/pull/19484), Jason Dillaman)
- rbd: Python RBD metadata\_get does not work ([issue#22306](http://tracker.ceph.com/issues/22306), [pr#19479](https://github.com/ceph/ceph/pull/19479), Mykola Golub)
- rbd: rbd ls -l crashes with SIGABRT ([issue#21558](http://tracker.ceph.com/issues/21558), [pr#19800](https://github.com/ceph/ceph/pull/19800), Jason Dillaman)
- rbd: \[rbd-mirror\] new pools might not be detected ([issue#22461](http://tracker.ceph.com/issues/22461), [pr#19625](https://github.com/ceph/ceph/pull/19625), Jason Dillaman)
- rbd: \[rbd-nbd\] Fedora does not register resize events ([issue#22131](http://tracker.ceph.com/issues/22131), [pr#19066](https://github.com/ceph/ceph/pull/19066), Jason Dillaman)
- rbd: \[test\] UpdateFeatures RPC message should be included in test\_notify.py ([issue#21936](http://tracker.ceph.com/issues/21936), [pr#18838](https://github.com/ceph/ceph/pull/18838), Jason Dillaman)
- Revert ” luminous: msg/async: unregister connection failed when racing happened” ([issue#22231](http://tracker.ceph.com/issues/22231), [pr#20247](https://github.com/ceph/ceph/pull/20247), Sage Weil)
- rgw: 501 is returned When init multipart is using V4 signature and chunk encoding ([issue#22129](http://tracker.ceph.com/issues/22129), [pr#19506](https://github.com/ceph/ceph/pull/19506), Jeegn Chen)
- rgw: add cors header rule check in cors option request ([issue#22002](http://tracker.ceph.com/issues/22002), [pr#19053](https://github.com/ceph/ceph/pull/19053), yuliyang)
- rgw: backport beast frontend and boost 1.66 update ([issue#22101](http://tracker.ceph.com/issues/22101), [issue#20935](http://tracker.ceph.com/issues/20935), [issue#21831](http://tracker.ceph.com/issues/21831), [issue#20048](http://tracker.ceph.com/issues/20048), [issue#22600](http://tracker.ceph.com/issues/22600), [issue#20971](http://tracker.ceph.com/issues/20971), [pr#19848](https://github.com/ceph/ceph/pull/19848), Casey Bodley, Jiaying Ren)
- rgw: bucket index object not deleted after radosgw-admin bucket rm –purge-objects –bypass-gc ([issue#22122](http://tracker.ceph.com/issues/22122), [issue#19959](http://tracker.ceph.com/issues/19959), [pr#19085](https://github.com/ceph/ceph/pull/19085), Aleksei Gutikov)
- rgw: bucket policy evaluation logical error ([issue#21901](http://tracker.ceph.com/issues/21901), [issue#21896](http://tracker.ceph.com/issues/21896), [pr#19810](https://github.com/ceph/ceph/pull/19810), Adam C. Emerson)
- rgw: bucket resharding should not update bucket ACL or user stats ([issue#22742](http://tracker.ceph.com/issues/22742), [issue#22124](http://tracker.ceph.com/issues/22124), [pr#20327](https://github.com/ceph/ceph/pull/20327), Orit Wasserman)
- rgw: check going\_down() when lifecycle processing ([issue#22099](http://tracker.ceph.com/issues/22099), [pr#19088](https://github.com/ceph/ceph/pull/19088), Yao Zongyou)
- rgw: Dynamic bucket indexing, resharding and tenants seems to be broken ([issue#22046](http://tracker.ceph.com/issues/22046), [pr#19050](https://github.com/ceph/ceph/pull/19050), Orit Wasserman)
- rgw: file deadlock on lru evicting ([issue#22736](http://tracker.ceph.com/issues/22736), [pr#20075](https://github.com/ceph/ceph/pull/20075), Matt Benjamin)
- rgw: fix chained cache invalidation to prevent cache size growth ([issue#22410](http://tracker.ceph.com/issues/22410), [pr#19785](https://github.com/ceph/ceph/pull/19785), Mark Kogan)
- rgw: fix for empty query string in beast frontend ([issue#22797](http://tracker.ceph.com/issues/22797), [pr#20338](https://github.com/ceph/ceph/pull/20338), Casey Bodley)
- rgw: fix GET website response error code ([issue#22272](http://tracker.ceph.com/issues/22272), [pr#19489](https://github.com/ceph/ceph/pull/19489), Dmitry Plyakin)
- rgw: fix rewrite a versioning object create a new object bug ([issue#21984](http://tracker.ceph.com/issues/21984), [issue#22529](http://tracker.ceph.com/issues/22529), [pr#19787](https://github.com/ceph/ceph/pull/19787), Enming Zhang, Matt Benjamin)
- rgw: Fix swift object expiry not deleting objects ([issue#22084](http://tracker.ceph.com/issues/22084), [pr#18972](https://github.com/ceph/ceph/pull/18972), Pavan Rallabhandi)
- rgw: Fix swift object expiry not deleting objects ([issue#22084](http://tracker.ceph.com/issues/22084), [pr#19090](https://github.com/ceph/ceph/pull/19090), Pavan Rallabhandi)
- rgw: librgw: fix shutdown error with resources uncleaned ([issue#22296](http://tracker.ceph.com/issues/22296), [pr#20073](https://github.com/ceph/ceph/pull/20073), Tao Chen)
- rgw: log keystone errors at a higher level ([issue#22151](http://tracker.ceph.com/issues/22151), [pr#19077](https://github.com/ceph/ceph/pull/19077), Abhishek Lekshmanan)
- rgw: make HTTP dechunking compatible with Amazon S3 ([issue#21015](http://tracker.ceph.com/issues/21015), [pr#19500](https://github.com/ceph/ceph/pull/19500), Radoslaw Zarzynski)
- rgw: modify s3 type subuser access permission fail ([issue#21983](http://tracker.ceph.com/issues/21983), [pr#18766](https://github.com/ceph/ceph/pull/18766), yuliyang)
- rgw: multisite: destination zone does not compress synced objects ([issue#21895](http://tracker.ceph.com/issues/21895), [pr#18867](https://github.com/ceph/ceph/pull/18867), Casey Bodley)
- rgw: multisite: ‘radosgw-admin sync error list’ contains temporary EBUSY errors ([issue#22473](http://tracker.ceph.com/issues/22473), [pr#19799](https://github.com/ceph/ceph/pull/19799), Casey Bodley)
- rgw: null instance mtime incorrect when enable versioning ([issue#21743](http://tracker.ceph.com/issues/21743), [pr#18870](https://github.com/ceph/ceph/pull/18870), Shasha Lu)
- rgw: Policy parser may or may not dereference uninitialized boost::optional sometimes ([issue#21962](http://tracker.ceph.com/issues/21962), [pr#18868](https://github.com/ceph/ceph/pull/18868), Adam C. Emerson)
- rgw: Possible deadlock in ‘list\_children’ when refresh is required ([issue#21670](http://tracker.ceph.com/issues/21670), [pr#18564](https://github.com/ceph/ceph/pull/18564), Jason Dillaman)
- rgw: put bucket policy panics RGW process ([issue#22541](http://tracker.ceph.com/issues/22541), [pr#19847](https://github.com/ceph/ceph/pull/19847), Bingyin Zhang)
- rgw: radosgw-admin reshard command argument error ([issue#21723](http://tracker.ceph.com/issues/21723), [pr#19502](https://github.com/ceph/ceph/pull/19502), Yao Zongyou)
- rgw: radosgw-admin zonegroup get and zone get should return defaults when there is no realm ([issue#21615](http://tracker.ceph.com/issues/21615), [pr#19086](https://github.com/ceph/ceph/pull/19086), lvshanchun)
- rgw: Random 500 errors in Swift PutObject (needs cache fixes) ([issue#22517](http://tracker.ceph.com/issues/22517), [issue#21560](http://tracker.ceph.com/issues/21560), [pr#19788](https://github.com/ceph/ceph/pull/19788), Adam C. Emerson)
- rgw: refuses upload when Content-Type missing from POST policy ([issue#20201](http://tracker.ceph.com/issues/20201), [pr#19867](https://github.com/ceph/ceph/pull/19867), Matt Benjamin)
- rgw: revert PR #8765 ([issue#22364](http://tracker.ceph.com/issues/22364), [pr#19434](https://github.com/ceph/ceph/pull/19434), fang.yuxiang)
- rgw: RGWCrashError: RGW will crash if a putting lc config request does not include an ID tag in the request xml ([issue#21980](http://tracker.ceph.com/issues/21980), [issue#22006](http://tracker.ceph.com/issues/22006), [pr#18765](https://github.com/ceph/ceph/pull/18765), Enming Zhang)
- rgw: rgw multisite: automated trimming for bucket index logs ([issue#18229](http://tracker.ceph.com/issues/18229), [pr#20062](https://github.com/ceph/ceph/pull/20062), Casey Bodley)
- rgw: RGW: S3 POST policy should not require Content-Type ([issue#20201](http://tracker.ceph.com/issues/20201), [pr#19784](https://github.com/ceph/ceph/pull/19784), Matt Benjamin)
- rgw: rgw segfaults after running radosgw-admin data sync init ([issue#22083](http://tracker.ceph.com/issues/22083), [pr#19071](https://github.com/ceph/ceph/pull/19071), Casey Bodley, Abhishek Lekshmanan)
- rgw: rgw usage trim only trims a few entries ([issue#22234](http://tracker.ceph.com/issues/22234), [pr#19636](https://github.com/ceph/ceph/pull/19636), Abhishek Lekshmanan)
- rgw: S3 API Policy Conditions IpAddress and NotIpAddress do not work ([issue#20931](http://tracker.ceph.com/issues/20931), [issue#20991](http://tracker.ceph.com/issues/20991), [pr#19819](https://github.com/ceph/ceph/pull/19819), John Gibson, yuliyang, Casey Bodley, Abhishek Lekshmanan, Jiaying Ren)
- rgw: Segmentation fault when starting radosgw after reverting .rgw.root ([issue#21996](http://tracker.ceph.com/issues/21996), [pr#18764](https://github.com/ceph/ceph/pull/18764), Orit Wasserman, Casey Bodley)
- rgw: set sync\_from\_all as true when no value is seen ([issue#22062](http://tracker.ceph.com/issues/22062), [pr#19038](https://github.com/ceph/ceph/pull/19038), Abhishek Lekshmanan)
- rgw: unlink deleted bucket from bucket’s owner ([issue#22248](http://tracker.ceph.com/issues/22248), [pr#20357](https://github.com/ceph/ceph/pull/20357), Casey Bodley)
- rgw: user stats increased after bucket reshard ([issue#22124](http://tracker.ceph.com/issues/22124), [pr#19538](https://github.com/ceph/ceph/pull/19538), Orit Wasserman)
- rgw: When a system object is created exclusively, do not distribute the ([issue#22792](http://tracker.ceph.com/issues/22792), [pr#20107](https://github.com/ceph/ceph/pull/20107), J. Eric Ivancich, Robin H. Johnson)
- tests: ceph\_test\_cls\_log failures related to cls\_cxx\_subop\_version() ([issue#21964](http://tracker.ceph.com/issues/21964), [pr#18715](https://github.com/ceph/ceph/pull/18715), Casey Bodley)
- tests: ceph\_test\_objectstore fails ObjectStore/StoreTest.Synthetic/1 (filestore) buffer content mismatch ([issue#21712](http://tracker.ceph.com/issues/21712), [issue#21818](http://tracker.ceph.com/issues/21818), [pr#18742](https://github.com/ceph/ceph/pull/18742), Sage Weil)
- tests: configure zabbix properly before selftest ([issue#22514](http://tracker.ceph.com/issues/22514), [pr#19831](https://github.com/ceph/ceph/pull/19831), John Spray)
- tests: do not configure ec data pool with memstore ([issue#22436](http://tracker.ceph.com/issues/22436), [pr#19628](https://github.com/ceph/ceph/pull/19628), Patrick Donnelly)
- tests: force backfill test can conflict with pool removal ([issue#22614](http://tracker.ceph.com/issues/22614), [pr#19966](https://github.com/ceph/ceph/pull/19966), Sage Weil)
- tests: full flag not set on osdmap for tasks.cephfs.test\_full ([issue#22475](http://tracker.ceph.com/issues/22475), [pr#19962](https://github.com/ceph/ceph/pull/19962), Patrick Donnelly)
- tests: increase osd count for ec testing ([issue#22646](http://tracker.ceph.com/issues/22646), [pr#19976](https://github.com/ceph/ceph/pull/19976), Patrick Donnelly)
- tests - Initial checkin for luminous point-to-point upgrade ([issue#22048](http://tracker.ceph.com/issues/22048), [pr#18771](https://github.com/ceph/ceph/pull/18771), Yuri Weinstein)
- tests: qa/workunits/rbd: simplify split-brain test to avoid potential race ([issue#22485](http://tracker.ceph.com/issues/22485), [pr#20205](https://github.com/ceph/ceph/pull/20205), Jason Dillaman)
- tests: qa/workunits/rbd: switch devstack to pike release ([issue#22786](http://tracker.ceph.com/issues/22786), [pr#20136](https://github.com/ceph/ceph/pull/20136), Jason Dillaman)
- tests: rbd\_mirror\_helpers.sh request\_resync\_image function saves image id to wrong variable ([issue#21663](http://tracker.ceph.com/issues/21663), [pr#19802](https://github.com/ceph/ceph/pull/19802), Jason Dillaman)
- tools/ceph\_monstore\_tool: include mgrmap in initial paxos epoch ([issue#22266](http://tracker.ceph.com/issues/22266), [pr#20116](https://github.com/ceph/ceph/pull/20116), Kefu Chai)
- tools: ceph-monstore-tool –readable mode doesn’t understand FSMap, MgrMap ([issue#21577](http://tracker.ceph.com/issues/21577), [pr#18754](https://github.com/ceph/ceph/pull/18754), John Spray)
- tools: ceph-objectstore-tool: Add option dump-import to examine an export ([issue#22086](http://tracker.ceph.com/issues/22086), [pr#19487](https://github.com/ceph/ceph/pull/19487), David Zafman)
- tools: ceph\_objectstore\_tool: no flush before collection\_empty() calls; ObjectStore/StoreTest.SimpleAttrTest/2 fails ([issue#22409](http://tracker.ceph.com/issues/22409), [pr#19967](https://github.com/ceph/ceph/pull/19967), Igor Fedotov)
- tools: ceph-objectstore-tool set-size should clear data-digest ([issue#22112](http://tracker.ceph.com/issues/22112), [pr#20069](https://github.com/ceph/ceph/pull/20069), David Zafman)
- tools/crushtool: skip device id if no name exists ([issue#22117](http://tracker.ceph.com/issues/22117), [pr#19039](https://github.com/ceph/ceph/pull/19039), Jan Fajerski)
